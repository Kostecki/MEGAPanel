language: node_js
node_js:
  - "stable"

addons:
  sshknownhosts:
    - 62.135.244.78

branches:
  only:
    - master

cache:
  directories:
    - "node_modules"

install:
  - npm install

script:
  - npm run build

before_deploy:
- chmod 600 .travis/id_rsa.enc && mv .travis/id_rsa.enc ~/.ssh/id_rsa

deploy:
  provider: script
  script: scp $TRAVIS_BUILD_DIR/build $SSH_USER@$SSH_HOST:$REMOTE_DIR
  on:
    branch: master